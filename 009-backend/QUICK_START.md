# 快速启动指南

## 一、环境准备

### 1.1 必需环境
- JDK 17+
- MySQL 8.0+
- Node.js 16+
- Maven 3.6+

### 1.2 检查环境
```bash
java -version
mysql --version
node -v
npm -v
mvn -v
```

## 二、后端启动

### 2.1 创建数据库
```bash
mysql -u root -p
```

执行SQL脚本：
```sql
source D:/毕业设计/2026-biyesheji/009-backend/src/main/resources/sql/express_system.sql
```

或者直接在Navicat等工具中导入 `express_system.sql` 文件

### 2.2 修改配置
编辑 `009-backend/src/main/resources/application.yml`

```yaml
spring:
  datasource:
    username: root
    password: root  # 修改为你的数据库密码
```

### 2.3 启动后端
#### 方式一：IDEA启动
1. 用IDEA打开 `009-backend` 项目
2. 右键 `ExpressSystemApplication.java`
3. 选择 `Run 'ExpressSystemApplication'`

#### 方式二：命令行启动
```bash
cd 009-backend
mvn clean package
java -jar target/009-backend-1.0-SNAPSHOT.jar
```

#### 方式三：Maven启动
```bash
cd 009-backend
mvn spring-boot:run
```

### 2.4 验证后端
看到以下输出表示启动成功：
```
=================================
校园快递代收管理系统启动成功！
访问地址: http://localhost:8009
=================================
```

访问测试接口：http://localhost:8009/api/company/all

## 三、前端启动

### 3.1 安装依赖
```bash
cd 009-frontend
npm install
```

如果安装慢，可以使用淘宝镜像：
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

### 3.2 启动前端
```bash
npm run dev
```

### 3.3 访问系统
浏览器访问：http://localhost:5009

## 四、测试账号

### 4.1 系统管理员
- 用户名: `admin`
- 密码: `123456`
- 功能: 所有功能

### 4.2 代收点管理员
- 用户名: `station1`
- 密码: `123456`
- 功能: 快递入库、取件核销、批量导入

### 4.3 快递员
- 用户名: `courier1`
- 密码: `123456`
- 功能: 快递入库、批量导入

### 4.4 学生用户
- 用户名: `student1` / `student2` / `student3`
- 密码: `123456`
- 功能: 查看快递、取件历史、消息通知

## 五、功能测试

### 5.1 快递入库流程
1. 使用 `courier1` 或 `admin` 账号登录
2. 进入"快递入库"页面
3. 填写快递信息：
   - 快递单号: `TEST1234567890`
   - 快递公司: 选择"顺丰速运"
   - 收件人手机号: `13800001001`（student1的手机号）
   - 代收点: 选择"东区菜鸟驿站"
   - 货架位置: `A-01-01`
4. 点击"确认入库"
5. 系统生成取件码并发送通知

### 5.2 学生查看快递
1. 使用 `student1` 账号登录
2. 进入"我的快递"页面
3. 可以看到刚才入库的快递
4. 记下取件码

### 5.3 取件核销流程
1. 使用 `admin` 或 `courier1` 账号登录
2. 进入"取件核销"页面
3. 输入取件码
4. 点击"验证"查看快递信息
5. 确认后点击"确认取件"
6. 取件成功

### 5.4 批量导入流程
1. 使用 `admin` 账号登录
2. 进入"批量导入"页面
3. 点击"下载模板"
4. 在Excel中填写快递信息
5. 上传文件
6. 查看导入结果

### 5.5 数据统计查看
1. 使用 `admin` 账号登录
2. 进入"数据统计"页面
3. 查看今日数据概览
4. 查看趋势图、饼图、柱状图
5. 查看快递公司和代收点排行

## 六、核心功能清单

### ✅ 已完成功能

#### 后端功能
- [x] 用户注册登录（JWT认证）
- [x] 快递入库（单个/批量导入Excel）
- [x] 取件码自动生成
- [x] 取件核销
- [x] 超期自动计算
- [x] 超期费用计算
- [x] 定时任务（每日凌晨1点自动计算超期）
- [x] 通知系统（站内消息）
- [x] 代收点管理
- [x] 快递公司管理
- [x] 用户管理
- [x] 操作日志记录
- [x] 数据统计API
- [x] 导出Excel

#### 前端功能
- [x] 登录注册页面
- [x] 学生端（我的快递、取件历史、消息通知、个人中心）
- [x] 快递员端（快递入库、批量导入、取件核销、快递管理）
- [x] 管理员端（数据统计、快递管理、代收点管理、快递公司管理、用户管理、批量导入、操作日志、系统配置）
- [x] ECharts数据可视化（折线图、饼图、柱状图）
- [x] 批量导入Excel界面
- [x] 导出Excel功能
- [x] 系统配置界面
- [x] 操作日志查看

### 📋 PRD对比完成度

| 功能模块 | PRD要求 | 实现状态 | 完成度 |
|---------|---------|---------|--------|
| 用户管理 | 注册登录、信息管理 | ✅ 完整实现 | 100% |
| 快递入库 | 单个/批量导入 | ✅ 完整实现 | 100% |
| 取件管理 | 验证取件码、核销 | ✅ 完整实现 | 100% |
| 超期管理 | 自动计算、提醒、收费 | ✅ 完整实现 | 100% |
| 代收点管理 | CRUD、库存统计 | ✅ 完整实现 | 100% |
| 通知系统 | 站内消息 | ✅ 完整实现 | 100% |
| 统计分析 | 概览、趋势、图表 | ✅ 完整实现 | 100% |
| 快递公司管理 | CRUD | ✅ 完整实现 | 100% |
| 系统配置 | 超期规则配置 | ✅ 完整实现 | 100% |
| 操作日志 | 记录+查看 | ✅ 完整实现 | 100% |
| 批量导入 | Excel导入 | ✅ 完整实现 | 100% |
| 导出功能 | 导出Excel | ✅ 完整实现 | 100% |
| 数据可视化 | ECharts图表 | ✅ 完整实现 | 100% |

**总体完成度：100% 🎉**

## 七、技术亮点

### 7.1 后端技术
1. **Spring Boot 3** - 最新稳定版本
2. **MyBatis-Plus** - 简化CRUD操作，提高开发效率
3. **JWT认证** - 无状态认证，适合前后端分离
4. **定时任务** - 自动化超期计算和提醒
5. **Excel导入导出** - Apache POI处理Excel文件
6. **统一返回格式** - Result封装，规范API响应
7. **操作日志** - 完整记录所有操作

### 7.2 前端技术
1. **Vue 3** - Composition API，代码更简洁
2. **Element Plus** - 企业级UI组件库
3. **Pinia** - 轻量级状态管理
4. **Axios** - HTTP请求封装，统一错误处理
5. **Vue Router** - 路由守卫实现权限控制
6. **ECharts** - 专业数据可视化
7. **响应式设计** - 适配不同屏幕

### 7.3 业务亮点
1. **角色区分** - 4种角色，权限清晰
2. **自动化流程** - 取件码生成、通知发送、超期计算全自动
3. **超期管理** - 分阶梯收费，自动提醒
4. **批量处理** - 支持Excel批量导入导出
5. **实时统计** - 多维度数据分析
6. **操作追溯** - 完整的操作日志
7. **可视化** - 三种图表类型展示数据

## 八、系统架构

```
┌─────────────────────────────────────────────┐
│            前端 (Vue 3 + Element Plus)        │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │  学生端   │  │ 快递员端  │  │ 管理员端  │   │
│  └──────────┘  └──────────┘  └──────────┘   │
│         │              │              │       │
│         └──────────────┴──────────────┘       │
│                     │                         │
│                   Router                      │
│                     │                         │
│                   Axios                       │
└─────────────────────┼─────────────────────────┘
                      │ HTTP + JWT
┌─────────────────────┼─────────────────────────┐
│                   后端 (Spring Boot 3)         │
│                     │                         │
│         ┌───────────┴───────────┐             │
│         │    JWT 拦截器          │             │
│         └───────────┬───────────┘             │
│                     │                         │
│    ┌────────────────┼────────────────┐        │
│    │   Controller 层 (9个控制器)     │        │
│    └────────────────┬────────────────┘        │
│                     │                         │
│    ┌────────────────┼────────────────┐        │
│    │    Service 层 (8个服务)         │        │
│    └────────────────┬────────────────┘        │
│                     │                         │
│    ┌────────────────┼────────────────┐        │
│    │    Mapper 层 (8个映射器)        │        │
│    └────────────────┬────────────────┘        │
│                     │                         │
│              MyBatis-Plus                     │
│                     │                         │
└─────────────────────┼─────────────────────────┘
                      │
┌─────────────────────┼─────────────────────────┐
│              MySQL 8.0 数据库                  │
│                                               │
│  user  express  station  express_company      │
│  overdue_record  notification                 │
│  system_config  operation_log                 │
└───────────────────────────────────────────────┘
```

## 九、常见问题

### 9.1 数据库连接失败
**问题**：启动后端时提示数据库连接失败

**解决**：
1. 检查MySQL服务是否启动
2. 检查数据库名称是否为 `express_system`
3. 检查用户名密码是否正确
4. 检查MySQL端口是否为3306

### 9.2 前端启动失败
**问题**：npm install 或 npm run dev 失败

**解决**：
1. 删除 `node_modules` 文件夹
2. 删除 `package-lock.json` 文件
3. 重新运行 `npm install`
4. 如果还失败，使用淘宝镜像

### 9.3 跨域问题
**问题**：前端调用后端接口跨域

**解决**：
- 后端已配置CORS，允许跨域
- Vite已配置代理，开发环境不会跨域
- 生产环境需在Nginx配置代理

### 9.4 Token过期
**问题**：操作时提示token过期

**解决**：
- Token有效期24小时
- 过期后会自动跳转登录页
- 重新登录即可

### 9.5 Excel导入失败
**问题**：批量导入Excel失败

**解决**：
1. 检查Excel格式是否正确（.xlsx或.xls）
2. 检查必填字段是否完整
3. 检查代收点ID是否存在
4. 查看导入结果的失败列表

## 十、功能使用说明

### 10.1 快递入库
**单个入库**：
1. 登录快递员或管理员账号
2. 进入"快递入库"页面
3. 填写快递信息
4. 点击确认入库
5. 系统自动生成取件码

**批量导入**：
1. 进入"批量导入"页面
2. 下载Excel模板
3. 在模板中填写快递信息
4. 上传Excel文件
5. 系统自动导入并生成取件码

### 10.2 取件流程
**学生端**：
1. 登录学生账号
2. 查看"我的快递"
3. 记下取件码
4. 到代收点取件

**工作人员端**：
1. 进入"取件核销"页面
2. 输入取件码
3. 验证快递信息
4. 确认取件
5. 如有超期费用，先收费再核销

### 10.3 超期管理
- 系统每日凌晨1点自动计算超期
- 超期1天和3天自动发送提醒通知
- 超期7天标记为超期状态
- 超期15天发送长期滞留通知
- 取件时自动显示超期费用

### 10.4 数据统计
1. 登录管理员账号
2. 进入"数据统计"页面
3. 查看数据卡片（今日入库、取件、库存、超期）
4. 查看7日趋势折线图
5. 查看快递公司占比饼图
6. 查看代收点业务量柱状图

### 10.5 系统配置
1. 进入"系统配置"页面
2. 修改免费保管天数
3. 修改超期收费标准
4. 修改超期提醒天数
5. 修改长期滞留天数
6. 点击保存

## 十一、项目特色

### 11.1 自动化程度高
- 取件码自动生成
- 通知自动发送
- 超期自动计算
- 库存自动更新

### 11.2 用户体验好
- 界面简洁美观
- 操作流程清晰
- 实时数据更新
- 消息及时提醒

### 11.3 管理功能强
- 多角色权限控制
- 完整的操作日志
- 灵活的系统配置
- 丰富的数据统计

### 11.4 扩展性强
- 支持多代收点
- 支持多快递公司
- 配置项可灵活调整
- 代码结构清晰，易于扩展

## 十二、部署说明

### 12.1 后端部署
```bash
cd 009-backend
mvn clean package
java -jar target/009-backend-1.0-SNAPSHOT.jar
```

### 12.2 前端部署
```bash
cd 009-frontend
npm run build
```

将 `dist` 目录部署到Nginx或其他Web服务器

### 12.3 Nginx配置示例
```nginx
server {
    listen 80;
    server_name express.example.com;
    
    location / {
        root /var/www/express-frontend;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:8009;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## 十三、开发说明

### 13.1 项目结构
```
009-backend/          # 后端项目
├── src/main/java/
│   └── com/xiaou/
│       ├── common/   # 通用类
│       ├── config/   # 配置类
│       ├── controller/ # 控制器（9个）
│       ├── entity/   # 实体类（8个）
│       ├── mapper/   # 数据访问（8个）
│       ├── service/  # 业务逻辑（8个）
│       ├── interceptor/ # 拦截器
│       ├── task/     # 定时任务
│       └── utils/    # 工具类
├── src/main/resources/
│   ├── sql/          # 数据库脚本
│   └── application.yml # 配置文件
├── ACCOUNTS.md       # 测试账号
├── PRD/PRD.md        # 需求文档
└── README.md         # 项目说明

009-frontend/         # 前端项目
├── src/
│   ├── api/          # API接口（8个）
│   ├── layout/       # 布局组件（3个）
│   ├── router/       # 路由配置
│   ├── stores/       # 状态管理
│   ├── utils/        # 工具类
│   └── views/        # 页面组件
│       ├── student/  # 学生端（4个页面）
│       ├── courier/  # 快递员端（3个页面）
│       └── admin/    # 管理员端（9个页面）
├── package.json      # 依赖配置
└── vite.config.js    # Vite配置
```

### 13.2 代码规范
- 后端使用Lombok简化代码
- 前端使用Composition API
- 统一的命名规范
- 完整的错误处理

### 13.3 安全措施
- 密码MD5加密
- JWT Token认证
- 路由权限控制
- 接口权限验证

## 十四、演示流程建议

### 14.1 基础功能演示（5分钟）
1. 登录系统（展示不同角色）
2. 快递入库（展示自动生成取件码）
3. 学生查看快递（展示通知消息）
4. 取件核销（展示完整流程）

### 14.2 高级功能演示（5分钟）
1. 批量导入Excel（展示效率提升）
2. 数据统计（展示图表可视化）
3. 超期管理（展示自动计算和提醒）
4. 导出Excel（展示数据导出）

### 14.3 管理功能演示（3分钟）
1. 用户管理（展示角色管理）
2. 代收点管理（展示库存统计）
3. 系统配置（展示灵活配置）
4. 操作日志（展示审计功能）

## 十五、后续优化建议

### 15.1 功能扩展
1. 集成真实短信服务（阿里云、腾讯云）
2. 开发微信小程序版本
3. 添加物流轨迹查询
4. 实现扫码枪硬件对接
5. 开发监控大屏

### 15.2 性能优化
1. 添加Redis缓存
2. 数据库查询优化
3. 图片CDN加速
4. 接口响应优化

### 15.3 体验优化
1. 消息推送优化
2. 移动端适配
3. 暗黑模式支持
4. 多语言支持

## 十六、联系与支持

- 后端端口：8009
- 前端端口：5009
- 数据库：express_system

如遇问题请查看：
- `ACCOUNTS.md` - 测试账号
- `README.md` - 项目说明
- `PRD/PRD.md` - 完整需求文档

