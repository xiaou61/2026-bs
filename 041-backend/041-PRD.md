# 基于SpringBoot的在线心理评测与咨询系统PRD

## 1. 项目概述

### 1.1 项目背景
随着社会压力增大，心理健康问题日益受到重视。在线心理评测与咨询系统通过互联网方式提供便捷的心理测评、预约咨询、心理资讯等服务，帮助用户了解自身心理状态，及时获取专业帮助。

### 1.2 项目目标
- 提供多维度心理测评量表（焦虑、抑郁、压力、情绪等）
- 实现在线咨询师预约和实时咨询功能
- 建立用户心理档案和成长轨迹
- 提供心理科普文章和自助调节方法
- 支持咨询师入驻和评价体系

### 1.3 技术栈
**后端**
- Spring Boot 3.2.0
- MyBatis-Plus 3.5.5
- MySQL 8.0
- Redis（缓存测评量表、咨询师信息）
- JWT认证
- WebSocket（实时咨询）
- BCrypt密码加密

**前端**
- Vue 3
- Element Plus
- Axios
- Pinia
- Vue Router
- WebSocket Client

## 2. 用户角色

### 2.1 普通用户（USER）
- 注册登录、个人信息管理
- 心理测评、查看测评报告
- 预约咨询师、参与咨询
- 浏览心理文章、收藏分享
- 评价咨询师

### 2.2 咨询师（COUNSELOR）
- 入驻申请、资质认证
- 个人主页管理、擅长领域设置
- 设置可预约时段
- 接受预约、在线咨询
- 查看用户测评报告
- 撰写咨询记录

### 2.3 管理员（ADMIN）
- 用户管理
- 咨询师审核
- 测评量表管理
- 文章管理
- 预约订单管理
- 数据统计

## 3. 功能模块

### 3.1 用户系统
- 用户注册（手机/邮箱）
- 登录认证（JWT Token）
- 个人信息管理（昵称、头像、性别、年龄）
- 角色权限控制（用户/咨询师/管理员）
- 密码修改、找回

### 3.2 心理测评系统
**测评量表管理**
- 量表分类（焦虑量表、抑郁量表、压力量表、情绪量表、人格测试等）
- 题目管理（单选、多选、量表打分）
- 计分规则配置
- 结果解读配置

**测评流程**
- 选择测评量表
- 答题界面（支持暂存）
- 自动计分
- 生成测评报告
- 历史报告查看
- 测评结果趋势图

**测评报告**
- 总分和分项得分
- 结果等级（正常/轻度/中度/重度）
- 详细解读
- 建议措施
- 相关文章推荐

### 3.3 咨询师系统
**咨询师入驻**
- 申请入驻（真实姓名、资质证书、执业证号）
- 资质审核
- 个人主页设置（简介、擅长领域、咨询风格）
- 服务价格设置

**咨询时段管理**
- 添加可预约时段
- 批量设置时段
- 时段状态（可预约/已预约/已完成）
- 请假设置

**咨询管理**
- 预约列表
- 查看用户资料
- 查看用户测评报告
- 咨询记录撰写
- 咨询历史

### 3.4 预约咨询系统
**预约流程**
- 浏览咨询师列表（筛选擅长领域、价格、评分）
- 查看咨询师详情（简介、擅长、评价）
- 选择预约时段
- 填写咨询需求
- 提交预约
- 支付订单

**咨询会话**
- 文字聊天
- WebSocket实时通信
- 消息历史记录
- 咨询时长计时
- 结束咨询

**订单管理**
- 订单列表（待支付/待咨询/咨询中/已完成/已取消）
- 订单详情
- 取消预约（提前24小时）
- 订单评价

### 3.5 评价系统
- 评分（1-5星）
- 文字评价
- 匿名评价选项
- 评价展示（咨询师主页）
- 评分统计

### 3.6 心理文章系统
**文章管理**
- 文章分类（情绪管理、人际关系、职场压力、亲密关系、自我成长）
- 文章发布（标题、封面、内容、标签）
- 文章审核
- 置顶、推荐

**用户功能**
- 文章列表（分类筛选、搜索）
- 文章详情
- 点赞、收藏
- 评论互动
- 阅读统计

### 3.7 个人档案系统
- 测评历史记录
- 咨询历史记录
- 心理成长曲线
- 收藏的文章
- 我的评价

### 3.8 消息通知系统
- 预约成功通知
- 咨询开始提醒
- 咨询师回复通知
- 系统公告
- 站内信

### 3.9 管理后台
**用户管理**
- 用户列表
- 用户详情
- 账号状态管理

**咨询师管理**
- 入驻申请审核
- 咨询师列表
- 资质审核
- 咨询师推荐

**测评管理**
- 量表列表
- 量表创建编辑
- 题目管理
- 计分规则配置

**文章管理**
- 文章审核
- 文章列表
- 分类管理

**订单管理**
- 订单列表
- 订单详情
- 退款处理

**数据统计**
- 用户统计
- 咨询师统计
- 测评统计
- 订单统计
- 收入统计

## 4. 数据库设计

### 4.1 用户表（user）
- id, username, password, nickname, avatar, gender, age, phone, email, role, status, created_at, updated_at

### 4.2 咨询师表（counselor）
- id, user_id, real_name, certificate, certificate_no, specialties, introduction, style, price, rating, consult_count, status, created_at, updated_at

### 4.3 测评量表表（scale）
- id, name, category, description, question_count, duration, status, created_at, updated_at

### 4.4 题目表（question）
- id, scale_id, content, type, options, score_rule, order_num, created_at, updated_at

### 4.5 测评记录表（assessment_record）
- id, user_id, scale_id, answers, total_score, result_level, report, status, started_at, completed_at, created_at

### 4.6 咨询时段表（time_slot）
- id, counselor_id, slot_date, slot_time, duration, status, created_at, updated_at

### 4.7 预约订单表（appointment）
- id, user_id, counselor_id, time_slot_id, requirement, price, status, payment_status, chat_room_id, created_at, updated_at

### 4.8 咨询记录表（consult_record）
- id, appointment_id, counselor_id, user_id, record_content, created_at, updated_at

### 4.9 评价表（review）
- id, appointment_id, user_id, counselor_id, rating, comment, is_anonymous, created_at, updated_at

### 4.10 文章表（article）
- id, title, cover, category, content, tags, author_id, view_count, like_count, collect_count, status, is_top, is_recommended, created_at, updated_at

### 4.11 文章互动表（article_interaction）
- id, article_id, user_id, type, created_at

### 4.12 聊天消息表（chat_message）
- id, appointment_id, sender_id, sender_role, content, message_type, created_at

### 4.13 通知表（notification）
- id, user_id, type, title, content, is_read, created_at

## 5. 核心功能实现

### 5.1 测评系统计分算法
- 单题计分规则
- 总分计算
- 分项得分计算
- 结果等级判定
- 报告生成

### 5.2 预约时段管理
- 时段状态机（可预约 → 已预约 → 咨询中 → 已完成）
- 时段冲突检测
- 批量设置时段

### 5.3 WebSocket实时咨询
- 建立WebSocket连接
- 消息实时推送
- 在线状态管理
- 聊天室管理

### 5.4 Redis缓存策略
- 测评量表缓存（减少数据库查询）
- 咨询师信息缓存
- 热门文章缓存
- 用户Token缓存

## 6. 非功能需求

### 6.1 性能要求
- 测评答题响应时间 < 200ms
- 支持1000+并发测评
- WebSocket消息延迟 < 100ms

### 6.2 安全要求
- 密码BCrypt加密
- JWT Token认证
- 用户隐私保护
- 咨询记录加密存储

### 6.3 可用性要求
- 7x24小时服务
- 系统可用性 > 99%

## 7. 项目规模评估

- 数据库表：13张
- 后端API：80+个
- 前端页面：20+个（用户端12+咨询师端5+管理端8）
- 预计代码量：8000+行

## 8. 技术亮点

- MyBatis-Plus增强CRUD
- Redis多场景缓存应用
- WebSocket实时通信
- 测评计分算法
- 心理档案成长轨迹
- 完整的咨询预约流程
- 评价体系
