<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-card card" wx:if="{{userInfo}}">
    <view class="flex">
      <image class="avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-info flex-1">
        <view class="nickname">{{userInfo.nickname}}</view>
        <view class="target text-gray text-small">ç›®æ ‡: {{userInfo.targetSchool || 'æœªè®¾ç½®'}} Â· {{userInfo.targetMajor || 'æœªè®¾ç½®'}}</view>
      </view>
      <view class="study-days">
        <view class="days text-primary text-large text-bold">{{userInfo.studyDays || 0}}</view>
        <view class="text-gray text-small">è¿ç»­å­¦ä¹ </view>
      </view>
    </view>
  </view>

  <!-- æœªç™»å½•æç¤º -->
  <view class="card" wx:else>
    <view class="text-center">
      <view class="text-gray mb-20">ç™»å½•åæŸ¥çœ‹å­¦ä¹ æ•°æ®</view>
      <navigator url="/pages/login/login" class="btn-primary" style="display:inline-block;padding:16rpx 60rpx;">ç«‹å³ç™»å½•</navigator>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-nav card">
    <view class="nav-item" bindtap="goToCheckin">
      <view class="nav-icon checkin-icon">ğŸ“…</view>
      <view class="nav-text">æ¯æ—¥æ‰“å¡</view>
    </view>
    <view class="nav-item" bindtap="goToPlan">
      <view class="nav-icon plan-icon">ğŸ“‹</view>
      <view class="nav-text">å­¦ä¹ è®¡åˆ’</view>
    </view>
    <view class="nav-item" bindtap="goToWrongBook">
      <view class="nav-icon wrong-icon">ğŸ“•</view>
      <view class="nav-text">é”™é¢˜æœ¬</view>
    </view>
    <view class="nav-item" bindtap="goToNote">
      <view class="nav-icon note-icon">ğŸ“</view>
      <view class="nav-text">æˆ‘çš„ç¬”è®°</view>
    </view>
  </view>

  <!-- å…¬å‘Š -->
  <view class="card" wx:if="{{notices.length}}">
    <view class="section-title">
      <text>ğŸ“¢ æœ€æ–°å…¬å‘Š</text>
    </view>
    <view class="notice-item" wx:for="{{notices}}" wx:key="id" bindtap="goToNotice" data-id="{{item.id}}">
      <view class="notice-title">{{item.title}}</view>
      <view class="notice-time text-gray text-small">{{item.createTime}}</view>
    </view>
  </view>

  <!-- ç§‘ç›®åˆ†ç±» -->
  <view class="card">
    <view class="section-title">ğŸ“š ç§‘ç›®åˆ†ç±»</view>
    <view class="subject-grid">
      <view class="subject-item" wx:for="{{subjects}}" wx:key="id" bindtap="goToSubject" data-id="{{item.id}}">
        <view class="subject-icon">{{item.icon || 'ğŸ“–'}}</view>
        <view class="subject-name">{{item.name}}</view>
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨è¯¾ç¨‹ -->
  <view class="card">
    <view class="section-title flex-between">
      <text>ğŸ”¥ çƒ­é—¨è¯¾ç¨‹</text>
      <navigator url="/pages/course/course" class="text-primary text-small">æ›´å¤š</navigator>
    </view>
    <view class="course-list">
      <view class="course-item" wx:for="{{hotCourses}}" wx:key="id" bindtap="goToCourse" data-id="{{item.id}}">
        <image class="course-cover" src="{{item.coverImage || '/images/course-default.png'}}" mode="aspectFill"></image>
        <view class="course-info">
          <view class="course-title">{{item.title}}</view>
          <view class="course-teacher text-gray text-small">{{item.teacherName}}</view>
          <view class="course-meta flex-between">
            <text class="tag tag-blue" wx:if="{{item.isFree}}">å…è´¹</text>
            <text class="text-danger" wx:else>Â¥{{item.price}}</text>
            <text class="text-gray text-small">{{item.studentCount}}äººå­¦ä¹ </text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="stats-card card" wx:if="{{userInfo}}">
    <view class="section-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value text-primary">{{stats.totalStudyDuration || 0}}</view>
        <view class="stat-label text-gray text-small">å­¦ä¹ æ—¶é•¿(h)</view>
      </view>
      <view class="stat-item">
        <view class="stat-value text-success">{{stats.totalQuestions || 0}}</view>
        <view class="stat-label text-gray text-small">åšé¢˜æ•°</view>
      </view>
      <view class="stat-item">
        <view class="stat-value text-warning">{{stats.correctRate || 0}}%</view>
        <view class="stat-label text-gray text-small">æ­£ç¡®ç‡</view>
      </view>
      <view class="stat-item">
        <view class="stat-value" style="color:{{stats.todayChecked ? '#4CAF50' : '#999'}}">{{stats.todayChecked ? 'å·²æ‰“å¡' : 'æœªæ‰“å¡'}}</view>
        <view class="stat-label text-gray text-small">ä»Šæ—¥çŠ¶æ€</view>
      </view>
    </view>
  </view>
</view>
