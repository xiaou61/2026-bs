# æ ¡å›­è‡ªä¹ å®¤åº§ä½é¢„çº¦ç³»ç»Ÿ - åç«¯

åŸºäºSpring Boot 3.2.0 + MyBatis-Plus + JWTçš„æ ¡å›­è‡ªä¹ å®¤åº§ä½é¢„çº¦ç³»ç»Ÿåç«¯æœåŠ¡ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **ç”¨æˆ·ç®¡ç†**ï¼šå­¦ç”Ÿæ³¨å†Œç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†ã€ä¿¡ç”¨åˆ†ç³»ç»Ÿ
- **è‡ªä¹ å®¤ç®¡ç†**ï¼šè‡ªä¹ å®¤ä¿¡æ¯ç»´æŠ¤ã€åº§ä½åˆ†ç±»ç®¡ç†ã€çŠ¶æ€å®æ—¶æ›´æ–°
- **é¢„çº¦ç®¡ç†**ï¼šåœ¨çº¿åº§ä½é¢„çº¦ã€äºŒç»´ç ç­¾åˆ°ã€è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶
- **ä¿¡ç”¨ä½“ç³»**ï¼šä¿¡ç”¨åˆ†ç®¡ç†ã€çº¦æŸæœºåˆ¶ã€ä¿¡ç”¨è®°å½•è¿½è¸ª
- **æ•°æ®ç»Ÿè®¡**ï¼šä½¿ç”¨ç‡ç»Ÿè®¡ã€é«˜å³°æ—¶æ®µåˆ†æã€æ•°æ®å¯è§†åŒ–

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**ï¼šSpring Boot 3.2.0
- **æ•°æ®åº“**ï¼šMySQL 8.0
- **ORM**ï¼šMyBatis-Plus 3.5.5
- **è®¤è¯**ï¼šJWT (jsonwebtoken)
- **å·¥å…·åº“**ï¼šHutool 5.8.23, Lombok
- **äºŒç»´ç **ï¼šGoogle ZXing
- **æ„å»ºå·¥å…·**ï¼šMaven 3.6+
- **JDKç‰ˆæœ¬**ï¼šJava 17

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/main/java/com/xiaou/studyroom/
â”œâ”€â”€ StudyRoomApplication.java          # å¯åŠ¨ç±»
â”œâ”€â”€ config/                           # é…ç½®ç±»
â”‚   â”œâ”€â”€ CorsConfig.java               # è·¨åŸŸé…ç½®
â”‚   â”œâ”€â”€ MybatisPlusConfig.java        # MyBatis-Plusé…ç½®
â”‚   â””â”€â”€ WebConfig.java               # Webé…ç½®
â”œâ”€â”€ controller/                       # æ§åˆ¶å™¨å±‚
â”‚   â””â”€â”€ UserController.java           # ç”¨æˆ·æ¥å£
â”œâ”€â”€ service/                          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ UserService.java              # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ UserServiceImpl.java      # ç”¨æˆ·æœåŠ¡å®ç°
â”œâ”€â”€ mapper/                           # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ UserMapper.java               # ç”¨æˆ·Mapper
â”‚   â”œâ”€â”€ StudyRoomMapper.java          # è‡ªä¹ å®¤Mapper
â”‚   â”œâ”€â”€ SeatMapper.java               # åº§ä½Mapper
â”‚   â”œâ”€â”€ ReservationMapper.java        # é¢„çº¦è®°å½•Mapper
â”‚   â”œâ”€â”€ CreditRecordMapper.java       # ä¿¡ç”¨è®°å½•Mapper
â”‚   â”œâ”€â”€ UsageStatisticsMapper.java    # ä½¿ç”¨ç»Ÿè®¡Mapper
â”‚   â””â”€â”€ SystemConfigMapper.java       # ç³»ç»Ÿé…ç½®Mapper
â”œâ”€â”€ entity/                           # å®ä½“ç±»
â”‚   â”œâ”€â”€ User.java                     # ç”¨æˆ·å®ä½“
â”‚   â”œâ”€â”€ StudyRoom.java               # è‡ªä¹ å®¤å®ä½“
â”‚   â”œâ”€â”€ Seat.java                     # åº§ä½å®ä½“
â”‚   â”œâ”€â”€ Reservation.java             # é¢„çº¦è®°å½•å®ä½“
â”‚   â”œâ”€â”€ CreditRecord.java            # ä¿¡ç”¨è®°å½•å®ä½“
â”‚   â”œâ”€â”€ UsageStatistics.java         # ä½¿ç”¨ç»Ÿè®¡å®ä½“
â”‚   â””â”€â”€ SystemConfig.java            # ç³»ç»Ÿé…ç½®å®ä½“
â”œâ”€â”€ common/                           # é€šç”¨ç±»
â”‚   â””â”€â”€ Result.java                   # ç»Ÿä¸€å“åº”ç»“æœ
â”œâ”€â”€ interceptor/                       # æ‹¦æˆªå™¨
â”‚   â””â”€â”€ JwtInterceptor.java           # JWTæ‹¦æˆªå™¨
â””â”€â”€ utils/                            # å·¥å…·ç±»
    â”œâ”€â”€ JwtUtil.java                  # JWTå·¥å…·ç±»
    â””â”€â”€ QRCodeUtil.java               # äºŒç»´ç å·¥å…·ç±»
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

é¡¹ç›®åŒ…å«7å¼ æ ¸å¿ƒè¡¨ï¼š

1. **user** - ç”¨æˆ·è¡¨ï¼ˆå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ä¿¡ç”¨åˆ†ç­‰ï¼‰
2. **study_room** - è‡ªä¹ å®¤è¡¨ï¼ˆè‡ªä¹ å®¤ä¿¡æ¯ã€å¼€æ”¾æ—¶é—´ç­‰ï¼‰
3. **seat** - åº§ä½è¡¨ï¼ˆåº§ä½ä¿¡æ¯ã€ç±»å‹ã€çŠ¶æ€ã€åæ ‡ç­‰ï¼‰
4. **reservation** - é¢„çº¦è®°å½•è¡¨ï¼ˆé¢„çº¦ä¿¡æ¯ã€ç­¾åˆ°æ—¶é—´ã€çŠ¶æ€ç­‰ï¼‰
5. **credit_record** - ä¿¡ç”¨è®°å½•è¡¨ï¼ˆä¿¡ç”¨åˆ†å˜åŠ¨è®°å½•ï¼‰
6. **usage_statistics** - ä½¿ç”¨ç»Ÿè®¡è¡¨ï¼ˆè‡ªä¹ å®¤ä½¿ç”¨ç‡ç»Ÿè®¡ï¼‰
7. **system_config** - ç³»ç»Ÿé…ç½®è¡¨ï¼ˆç³»ç»Ÿå‚æ•°é…ç½®ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- JDK 17+
- Maven 3.6+
- MySQL 8.0+

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd 022-backend
   ```

2. **æ•°æ®åº“é…ç½®**
   ```sql
   # åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥è¡¨ç»“æ„å’Œåˆå§‹æ•°æ®
   mysql -u root -p
   source sql/init.sql
   ```

3. **ä¿®æ”¹é…ç½®**
   ç¼–è¾‘ `src/main/resources/application.yml` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/study_room?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8
       username: your_username
       password: your_password
   ```

4. **å¯åŠ¨é¡¹ç›®**
   ```bash
   mvn clean install
   mvn spring-boot:run
   ```

5. **è®¿é—®æ¥å£**
   é¡¹ç›®å¯åŠ¨åï¼ŒAPIè®¿é—®åœ°å€ï¼š`http://localhost:8080/api`

## ğŸ“š APIæ–‡æ¡£

### ç”¨æˆ·æ¨¡å— `/api/user`

| æ–¹æ³• | è·¯å¾„ | æè¿° | è¯·æ±‚å‚æ•° |
|------|------|------|---------|
| POST | `/user/login` | ç”¨æˆ·ç™»å½• | `{username, password}` |
| POST | `/user/register` | ç”¨æˆ·æ³¨å†Œ | `{username, password, realName, department, grade, phone}` |
| GET | `/user/info` | è·å–ç”¨æˆ·ä¿¡æ¯ | Header: Authorization |
| PUT | `/user/update` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | `{realName, department, grade, phone}` |
| GET | `/user/page` | è·å–ç”¨æˆ·åˆ—è¡¨ | `current, size, keyword` |

### è‡ªä¹ å®¤æ¨¡å— `/api/room`

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/room/list` | è·å–è‡ªä¹ å®¤åˆ—è¡¨ |
| GET | `/room/{id}` | è·å–è‡ªä¹ å®¤è¯¦æƒ… |
| POST | `/room` | åˆ›å»ºè‡ªä¹ å®¤ |
| PUT | `/room/{id}` | æ›´æ–°è‡ªä¹ å®¤ä¿¡æ¯ |
| DELETE | `/room/{id}` | åˆ é™¤è‡ªä¹ å®¤ |

### åº§ä½æ¨¡å— `/api/seat`

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/seat/list` | è·å–åº§ä½åˆ—è¡¨ |
| GET | `/seat/available` | è·å–å¯ç”¨åº§ä½ |
| POST | `/seat` | æ·»åŠ åº§ä½ |
| PUT | `/seat/{id}` | æ›´æ–°åº§ä½ä¿¡æ¯ |
| DELETE | `/seat/{id}` | åˆ é™¤åº§ä½ |

### é¢„çº¦æ¨¡å— `/api/reservation`

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/reservation` | åˆ›å»ºé¢„çº¦ |
| GET | `/reservation/my` | æˆ‘çš„é¢„çº¦åˆ—è¡¨ |
| PUT | `/reservation/{id}/cancel` | å–æ¶ˆé¢„çº¦ |
| POST | `/reservation/checkin` | ç­¾åˆ°æ ¸é”€ |
| GET | `/reservation/qrcode/{id}` | è·å–é¢„çº¦äºŒç»´ç  |

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### JWTè®¤è¯
- åŸºäºTokençš„æ— çŠ¶æ€è®¤è¯
- è‡ªåŠ¨è¿‡æœŸå’Œç»­æœŸæœºåˆ¶
- ç»Ÿä¸€é‰´æƒæ‹¦æˆªå™¨

### ä¿¡ç”¨ä½“ç³»
- åˆå§‹ä¿¡ç”¨åˆ†100åˆ†
- åŠ¨æ€ä¿¡ç”¨åˆ†è®¡ç®—
- çº¦æŸæœºåˆ¶å’Œé™åˆ¶è§„åˆ™

### é¢„çº¦è§„åˆ™
- æå‰æœ€å¤š2å¤©é¢„çº¦
- å•æ¬¡æœ€é•¿4å°æ—¶
- 15åˆ†é’Ÿç­¾åˆ°æœ‰æ•ˆ
- è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾

### æ•°æ®ç»Ÿè®¡
- å®æ—¶åº§ä½ä½¿ç”¨ç‡
- é«˜å³°æ—¶æ®µåˆ†æ
- ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡

## ğŸ“ ä¸šåŠ¡è§„åˆ™

### é¢„çº¦è§„åˆ™
1. å¯æå‰æœ€å¤š2å¤©é¢„çº¦ï¼Œæœ€å°‘æå‰1å°æ—¶
2. å•æ¬¡é¢„çº¦æœ€é•¿4å°æ—¶ï¼Œæ¯å¤©æœ€å¤š8å°æ—¶
3. åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆé¢„çº¦
4. é¢„çº¦å¼€å§‹å15åˆ†é’Ÿå†…å¿…é¡»ç­¾åˆ°

### ä¿¡ç”¨åˆ†è§„åˆ™
1. åˆå§‹ä¿¡ç”¨åˆ†100åˆ†
2. æ­£å¸¸ç­¾åˆ°ä½¿ç”¨å®Œæ¯•+2åˆ†
3. è¶…æ—¶æœªç­¾åˆ°-5åˆ†ï¼Œæå‰ç¦»å¼€-2åˆ†
4. ä¿¡ç”¨åˆ†<60åˆ†æ—¶é™åˆ¶é¢„çº¦
5. ä¿¡ç”¨åˆ†<30åˆ†æ—¶æš‚åœé¢„çº¦æƒé™

## ğŸ¯ APIå“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

- `code`: çŠ¶æ€ç ï¼ˆ200æˆåŠŸï¼Œ500å¤±è´¥ï¼Œ401æœªæˆæƒï¼‰
- `message`: å“åº”æ¶ˆæ¯
- `data`: å“åº”æ•°æ®

## ğŸ”’ å®‰å…¨æœºåˆ¶

- JWT Tokenè®¤è¯
- å¯†ç MD5åŠ å¯†å­˜å‚¨
- å‚æ•°éªŒè¯å’ŒSQLæ³¨å…¥é˜²æŠ¤
- è·¨åŸŸè¯·æ±‚æ§åˆ¶

## ğŸ› ï¸ å¼€å‘å·¥å…·

- **IDE**: IntelliJ IDEA / Eclipse
- **APIæµ‹è¯•**: Postman / Apifox
- **æ•°æ®åº“ç®¡ç†**: MySQL Workbench / Navicat

## âœ… å·²å®ŒæˆåŠŸèƒ½

- [x] å®Œæ•´çš„ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆæ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†ï¼‰
- [x] è‡ªä¹ å®¤ç®¡ç†æ¨¡å—ï¼ˆå¢åˆ æ”¹æŸ¥ã€çŠ¶æ€ç®¡ç†ï¼‰
- [x] åº§ä½ç®¡ç†æ¨¡å—ï¼ˆå¢åˆ æ”¹æŸ¥ã€æ‰¹é‡æ“ä½œã€çŠ¶æ€æ›´æ–°ï¼‰
- [x] å®Œæ•´çš„é¢„çº¦ç®¡ç†æ¨¡å—ï¼ˆé¢„çº¦ã€å–æ¶ˆã€ç­¾åˆ°ã€ç»“æŸï¼‰
- [x] äºŒç»´ç ç”Ÿæˆå’ŒéªŒè¯ç³»ç»Ÿ
- [x] ä¿¡ç”¨è®°å½•æ¨¡å—ï¼ˆç§¯åˆ†ç®¡ç†ã€è®°å½•æŸ¥è¯¢ï¼‰
- [x] æ•°æ®ç»Ÿè®¡åˆ†ææ¨¡å—ï¼ˆä½¿ç”¨ç‡ã€é«˜å³°æ—¶æ®µã€æŠ¥è¡¨ï¼‰
- [x] å®šæ—¶ä»»åŠ¡ï¼ˆè¶…æ—¶é‡Šæ”¾ã€è‡ªåŠ¨ç»Ÿè®¡ï¼‰
- [x] JWTè®¤è¯å’Œæ‹¦æˆªå™¨
- [x] å…¨å±€å¼‚å¸¸å¤„ç†
- [x] å‚æ•°æ ¡éªŒå’Œæ•°æ®éªŒè¯

## ğŸ“ å¾…å®ŒæˆåŠŸèƒ½

- [ ] WebSocketå®æ—¶åº§ä½çŠ¶æ€æ›´æ–°
- [ ] ç®¡ç†å‘˜åå°æ¥å£
- [ ] æ—¥å¿—è®°å½•å’Œå®¡è®¡åŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] é‚®ä»¶/çŸ­ä¿¡é€šçŸ¥åŠŸèƒ½

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é¡¹ç›®Issue: [GitHub Issues](https://github.com/your-username/022-backend/issues)
- é‚®ç®±: your-email@example.com

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ ¡å›­è‡ªä¹ å®¤åº§ä½é¢„çº¦ç³»ç»Ÿçš„åç«¯å®ç°ï¼Œé€‚åˆä½œä¸ºæ¯•ä¸šè®¾è®¡é¡¹ç›®ä½¿ç”¨ã€‚å¦‚éœ€åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œè¯·ç¡®ä¿å®Œå–„å®‰å…¨æœºåˆ¶å’Œæ€§èƒ½ä¼˜åŒ–ã€‚